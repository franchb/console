"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[9619],{9619:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var s=n(65043),r=n(94574),i=n(33097),a=n.n(i),l=n(73216),o=n(89923),d=n(56483),c=n(21383),u=n(22166),x=n(64159),h=n(23758),b=n(6681),j=n(57676),g=n(43596),p=n(70579);const m=e=>{let{hasErrors:t}=e;const n=(0,c.jL)(),s=(0,u.d4)(e=>e.addBucket.name);return(0,p.jsx)(o.cl_,{id:"bucket-name",name:"bucket-name",error:t?"Invalid bucket name":"",onFocus:()=>{n((0,j.Xb)(!0))},onChange:e=>{n((0,j.i)(e.target.value))},label:"Bucket Name",value:s,required:!0})};var f=n(99161),k=n(77938);const T=e=>{let{ruleText:t}=e;return(0,p.jsx)(s.Fragment,{children:(0,p.jsxs)(o.xA9,{container:!0,style:{display:"flex",justifyContent:"flex-start"},children:[(0,p.jsx)(o.xA9,{item:!0,xs:1,children:(0,p.jsx)(o.$rg,{width:"16px",height:"16px",style:{color:"#18BF42"}})}),(0,p.jsx)(o.xA9,{item:!0,xs:9,sx:{color:"#8f949c",display:"flex",justifyContent:"flex-start"},children:t})]})})},C=e=>{let{ruleText:t}=e;return(0,p.jsx)(s.Fragment,{children:(0,p.jsxs)(o.xA9,{container:!0,sx:{color:"#C83B51",display:"flex",justifyContent:"flex-start"},children:[(0,p.jsx)(o.xA9,{item:!0,xs:1,sx:{paddingRight:1},children:(0,p.jsx)(o.xWY,{width:"16px",height:"16px"})}),(0,p.jsx)(o.xA9,{item:!0,xs:9,sx:{color:"#C83B51",display:"flex",justifyContent:"flex-start",paddingLeft:1},children:t})]})})},v=e=>{let{ruleText:t}=e;return(0,p.jsx)(s.Fragment,{children:(0,p.jsxs)(o.xA9,{container:!0,sx:{display:"flex",justifyContent:"flex-start"},children:[(0,p.jsx)(o.xA9,{item:!0,xs:1,children:(0,p.jsx)(o.GQ2,{width:"12px",height:"12px",style:{color:"#8f949c"}})}),(0,p.jsx)(o.xA9,{item:!0,xs:9,sx:{color:"#8f949c",display:"flex",justifyContent:"flex-start"},style:{},children:t})]})})},y=e=>{let{errorList:t}=e;const n="Bucket names must be between 3 (min) and 63 (max) characters long.",r="Bucket names can consist only of lowercase letters, numbers, dots (.), and hyphens (-).",i="Bucket names must not contain two adjacent periods, or a period adjacent to a hyphen.",a="Bucket names must not be formatted as an IP address (for example, 192.168.5.4).",l="Bucket names must not start with the prefix xn--.",d="Bucket names must not end with the suffix -s3alias. This suffix is reserved for access point alias names.",c="Bucket names must be unique within a partition.",x=(0,u.d4)(e=>e.addBucket.name),[h,b]=(0,s.useState)(!1),j=(0,u.d4)(e=>e.addBucket.loading),[g,m,f,k,y,B,_]=t;return(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(o.J2w,{id:"toggle-naming-rules",type:"button",open:h,label:(h?"Hide":"View")+" Bucket Naming Rules",onClick:()=>{b(!h)}}),h&&(0,p.jsxs)(o.xA9,{container:!0,sx:{fontSize:14,paddingTop:12},children:[(0,p.jsxs)(o.xA9,{item:!0,xs:6,children:[0===x.length?(0,p.jsx)(v,{ruleText:n}):g?(0,p.jsx)(T,{ruleText:n}):(0,p.jsx)(C,{ruleText:n}),0===x.length?(0,p.jsx)(v,{ruleText:r}):m?(0,p.jsx)(T,{ruleText:r}):(0,p.jsx)(C,{ruleText:r}),0===x.length?(0,p.jsx)(v,{ruleText:i}):f?(0,p.jsx)(T,{ruleText:i}):(0,p.jsx)(C,{ruleText:i}),0===x.length?(0,p.jsx)(v,{ruleText:a}):k?(0,p.jsx)(T,{ruleText:a}):(0,p.jsx)(C,{ruleText:a})]}),(0,p.jsxs)(o.xA9,{item:!0,xs:6,children:[0===x.length?(0,p.jsx)(v,{ruleText:l}):y?(0,p.jsx)(T,{ruleText:l}):(0,p.jsx)(C,{ruleText:l}),0===x.length?(0,p.jsx)(v,{ruleText:d}):B?(0,p.jsx)(T,{ruleText:d}):(0,p.jsx)(C,{ruleText:d}),0===x.length?(0,p.jsx)(v,{ruleText:c}):_?(0,p.jsx)(T,{ruleText:c}):(0,p.jsx)(C,{ruleText:c})]})]}),j&&(0,p.jsx)(o.xA9,{item:!0,xs:12,children:(0,p.jsx)(o.z21,{})})]})};var B=n(48793),_=n(56629),O=n(53518),S=n(10636),A=n(12848);const E=r.Ay.div(e=>{let{theme:t}=e;return{color:a()(t,"signalColors.danger","#C51B3F"),border:`1px solid ${a()(t,"signalColors.danger","#C51B3F")}`,padding:8,borderRadius:3}}),w=()=>{const e=(0,c.jL)(),t=(0,l.Zp)(),n=new RegExp("^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$"),r=new RegExp("^(\\d+\\.){3}\\d+$"),i=(0,u.d4)(e=>e.addBucket.name),a=(0,u.d4)(e=>e.addBucket.isDirty),[T,C]=(0,s.useState)([]),v=T.filter(e=>!e).length>0,[w,F]=(0,s.useState)([]),V=(0,u.d4)(e=>e.addBucket.versioningEnabled),I=(0,u.d4)(e=>e.addBucket.excludeFolders),N=(0,u.d4)(e=>e.addBucket.excludedPrefixes),P=(0,u.d4)(e=>e.addBucket.lockingEnabled),U=(0,u.d4)(e=>e.addBucket.quotaEnabled),R=(0,u.d4)(e=>e.addBucket.quotaSize),z=(0,u.d4)(e=>e.addBucket.quotaUnit),L=(0,u.d4)(e=>e.addBucket.retentionEnabled),q=(0,u.d4)(e=>e.addBucket.retentionMode),$=(0,u.d4)(e=>e.addBucket.retentionUnit),G=(0,u.d4)(e=>e.addBucket.retentionValidity),J=(0,u.d4)(e=>e.addBucket.loading),K=(0,u.d4)(e=>e.addBucket.error),Y=(0,u.d4)(e=>e.addBucket.invalidFields),D=(0,u.d4)(e=>e.addBucket.lockingFieldDisabled),M=(0,u.d4)(x.Rq),Q=(0,u.d4)(x.nM),W=(0,u.d4)(e=>e.addBucket.navigateTo),H=(0,k._)("*",[f.OV.S3_PUT_BUCKET_VERSIONING,f.OV.S3_PUT_BUCKET_OBJECT_LOCK_CONFIGURATION,f.OV.S3_PUT_ACTIONS],!0),X=(0,k._)("*",[f.OV.S3_PUT_BUCKET_VERSIONING,f.OV.S3_PUT_ACTIONS]);(0,s.useEffect)(()=>{K&&e((0,x.C9)((0,O.S)(K)))},[K,e]),(0,s.useEffect)(()=>{const e=[!(a&&(i.length<3||i.length>63)),n.test(i),!(i.includes(".-")||i.includes("-.")||i.includes("..")),!r.test(i),!i.startsWith("xn--"),!i.endsWith("-s3alias"),!w.includes(i)];C(e)},[i,a]),(0,s.useEffect)(()=>{e((0,j.i)("")),e((0,j.Xb)(!1));_.F.buckets.listBuckets().then(t=>{if(t.data){var n=[];null!=t.data.buckets&&t.data.buckets.length>0&&t.data.buckets.forEach(e=>{n.push(e.name)}),F(n)}else t.error&&e((0,x.C9)((0,O.S)(t.error)))}).catch(t=>{e((0,x.C9)((0,O.S)(t)))})},[e]);return(0,s.useEffect)(()=>{if(""!==W){const n=`${W}`;e((0,j.E2)()),t(n)}},[W,t,e]),(0,s.useEffect)(()=>{e((0,x.ph)("add_bucket"))},[]),(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(B.A,{label:(0,p.jsx)(o.EGL,{label:"Buckets",onClick:()=>t("/buckets")}),actions:(0,p.jsx)(S.A,{})}),(0,p.jsx)(o.Mxu,{children:(0,p.jsx)(o.Hbc,{title:"Create Bucket",icon:(0,p.jsx)(o.brV,{}),helpBox:(0,p.jsx)(o.lVp,{iconComponent:(0,p.jsx)(o.brV,{}),title:"Buckets",help:(0,p.jsxs)(s.Fragment,{children:["Buckets are used to organize objects. A bucket is similar to a folder or directory in a filesystem, where each bucket can hold an arbitrary number of objects.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)("b",{children:"Versioning"})," allows to keep multiple versions of the same object under the same key.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)("b",{children:"Object Locking"})," prevents objects from being deleted. Required to support retention and legal hold. Can only be enabled at bucket creation.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)("b",{children:"Quota"})," limits the amount of data in the bucket.",H&&(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)("b",{children:"Retention"})," imposes rules to prevent object deletion for a period of time. Versioning must be enabled in order to set bucket retention policies."]}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{})]})}),children:(0,p.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:t=>{t.preventDefault(),e((0,g._)())},children:[(0,p.jsxs)(o.azJ,{children:[(0,p.jsx)(m,{hasErrors:v}),(0,p.jsx)(o.azJ,{sx:{margin:"10px 0"},children:(0,p.jsx)(y,{errorList:T})}),(0,p.jsx)(o._xt,{separator:!0,children:"Features"}),(0,p.jsxs)(o.azJ,{sx:{marginTop:10},children:[!M&&(0,p.jsxs)(s.Fragment,{children:[(0,p.jsxs)(E,{children:["These features are unavailable in a single-disk setup.",(0,p.jsx)("br",{}),"Please deploy a server in Distributed Mode to use these features."]}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{})]}),Q.enabled&&(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)("br",{}),(0,p.jsxs)(o.azJ,{withBorders:!0,sx:{display:"flex",alignItems:"center",padding:"10px","& > .min-icon ":{width:20,height:20,marginRight:10}},children:[(0,p.jsx)(o.mo0,{})," Versioning setting cannot be changed as cluster replication is enabled for this site."]}),(0,p.jsx)("br",{})]}),(0,p.jsx)(o.dOG,{value:"versioned",id:"versioned",name:"versioned",checked:V,onChange:t=>{e((0,j.tr)(t.target.checked))},label:"Versioning",disabled:!M||P||Q.enabled||!X,tooltip:X?"":(0,f.vj)([f.OV.S3_PUT_BUCKET_VERSIONING,f.OV.S3_PUT_ACTIONS],"Versioning"),helpTip:(0,p.jsxs)(s.Fragment,{children:[P&&V&&(0,p.jsxs)("strong",{children:[" ","You must disable Object Locking before Versioning can be disabled ",(0,p.jsx)("br",{})]}),"This supports keeping multiple versions of an object in a single bucket.",(0,p.jsx)("br",{}),"Versioning is required to enable Object Locking and Retention."]}),helpTipPlacement:"right"}),V&&M&&!P&&(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(o.dOG,{id:"excludeFolders",label:"Exclude Folders",checked:I,onChange:t=>{e((0,j.uQ)(t.target.checked))},indicatorLabels:["Enabled","Disabled"],helpTip:(0,p.jsxs)(s.Fragment,{children:["You can choose to exclude folders and prefixes from versioning if Object Locking is not enabled.",(0,p.jsx)("br",{}),"This requires versioning to support replication.",(0,p.jsx)("br",{}),"Objects in excluded prefixes do not replicate to any peer site or remote site."]}),helpTipPlacement:"right"}),(0,p.jsx)(A.A,{elements:N,label:"Excluded Prefixes",name:"excludedPrefixes",onChange:t=>{let n="";n=Array.isArray(t)?t.join(","):t,e((0,j.pw)(n))},withBorder:!0})]}),(0,p.jsx)(o.dOG,{value:"locking",id:"locking",name:"locking",disabled:D||!M||!H,checked:P,onChange:t=>{e((0,j.SO)(t.target.checked)),t.target.checked&&!Q.enabled&&e((0,j.tr)(!0))},label:"Object Locking",tooltip:H?"":(0,f.vj)([f.OV.S3_PUT_BUCKET_VERSIONING,f.OV.S3_PUT_BUCKET_OBJECT_LOCK_CONFIGURATION,f.OV.S3_PUT_ACTIONS],"Locking"),helpTip:(0,p.jsxs)(s.Fragment,{children:[L&&(0,p.jsxs)("strong",{children:[" ","You must disable Retention before Object Locking can be disabled ",(0,p.jsx)("br",{})]}),"You can only enable Object Locking when first creating a bucket.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),"Exclude folders and prefixes options will not be available if this option is enabled."]}),helpTipPlacement:"right"}),(0,p.jsx)(o.dOG,{value:"bucket_quota",id:"bucket_quota",name:"bucket_quota",checked:U,onChange:t=>{e((0,j.N2)(t.target.checked))},label:"Quota",disabled:!M,helpTip:(0,p.jsx)(s.Fragment,{children:"Setting a quota assigns a hard limit to a bucket beyond which this does not allow writes."}),helpTipPlacement:"right"}),U&&M&&(0,p.jsx)(s.Fragment,{children:(0,p.jsx)(o.cl_,{type:"string",id:"quota_size",name:"quota_size",onChange:t=>{e((0,j.A1)(t.target.value))},label:"Capacity",value:R,required:!0,min:"1",overlayObject:(0,p.jsx)(h.A,{id:"quota_unit",onUnitChange:t=>{e((0,j.rS)(t))},unitSelected:z,unitsList:(0,d.l9)(["Ki"]),disabled:!1}),error:Y.includes("quotaSize")?"Please enter a valid quota":""})}),V&&M&&H&&(0,p.jsx)(o.dOG,{value:"bucket_retention",id:"bucket_retention",name:"bucket_retention",checked:L,onChange:t=>{e((0,j.VB)(t.target.checked))},label:"Retention",helpTip:(0,p.jsxs)(s.Fragment,{children:["This supports setting both bucket-default and per-object retention rules.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{})," For per-object retention settings, defer to the documentation for the PUT operation used by your preferred SDK."]}),helpTipPlacement:"right"}),L&&M&&(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(o.z6M,{currentValue:q,id:"retention_mode",name:"retention_mode",label:"Mode",onChange:t=>{e((0,j.Og)(t.target.value))},selectorOptions:[{value:"compliance",label:"Compliance"},{value:"governance",label:"Governance"}],helpTip:(0,p.jsxs)(s.Fragment,{children:[" ","Compliance lock protects Objects from write operations by all users, including the root user.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),"Governance lock protects Objects from write operations by non-privileged users."]}),helpTipPlacement:"right"}),(0,p.jsx)(o.cl_,{type:"number",id:"retention_validity",name:"retention_validity",onChange:t=>{e((0,j.VY)(t.target.valueAsNumber))},label:"Validity",value:String(G),required:!0,overlayObject:(0,p.jsx)(h.A,{id:"retention_unit",onUnitChange:t=>{e((0,j.JW)(t))},unitSelected:$,unitsList:[{value:"days",label:"Days"},{value:"years",label:"Years"}],disabled:!1})})]})]})]}),(0,p.jsxs)(o.xA9,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:10,marginTop:15},children:[(0,p.jsx)(o.$nd,{id:"clear",type:"button",variant:"regular",className:"clearButton",onClick:()=>{e((0,j.E2)())},label:"Clear"}),(0,p.jsx)(b.A,{tooltip:Y.length>0||!a||v?"You must apply a valid name to the bucket":"",children:(0,p.jsx)(o.$nd,{id:"create-bucket",type:"submit",variant:"callAction",color:"primary",disabled:J||Y.length>0||!a||v,label:"Create Bucket"})})]}),J&&(0,p.jsx)(o.xA9,{item:!0,xs:12,children:(0,p.jsx)(o.z21,{})})]})})})]})}},12848:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(65043),r=n(33097),i=n.n(r),a=n(89923),l=n(70579);const o=e=>{let{elements:t,name:n,label:r,tooltip:o="",commonPlaceholder:d="",onChange:c,withBorder:u=!1}=e;const[x,h]=(0,s.useState)([""]),b=(0,s.createRef)();(0,s.useEffect)(()=>{if(1===x.length&&""===x[0]&&t&&""!==t){const e=t.split(",");e.push(""),h(e)}},[t,x]),(0,s.useEffect)(()=>{if(x.length>1){const e=b.current;e&&e.scrollIntoView(!1)}},[x,b]);const j=(0,s.useCallback)(e=>{c(e)},[c]),g=(0,s.useRef)(!0);(0,s.useEffect)(()=>{if(g.current)return void(g.current=!1);const e=x.filter(e=>""!==e.trim()).join(",");j(e)},[x]);const p=e=>{e.persist();let t=[...x];const n=i()(e.target,"dataset.index","0");t[parseInt(n)]=e.target.value,h(t)},m=x.map((e,t)=>(0,l.jsx)(a.cl_,{id:`${n}-${t.toString()}`,label:"",name:`${n}-${t.toString()}`,value:x[t],onChange:p,index:t,placeholder:d,overlayIcon:t===x.length-1?(0,l.jsx)(a.REV,{}):null,overlayAction:()=>{(e=>{if(""!==e[e.length-1].trim()){const t=[...e];t.push(""),h(t)}})(x)}},`csv-multi-${n}-${t.toString()}`));return(0,l.jsx)(s.Fragment,{children:(0,l.jsxs)(a.azJ,{sx:{display:"flex"},className:"inputItem",children:[(0,l.jsxs)(a.l1Y,{sx:{alignItems:"flex-start"},children:[(0,l.jsx)("span",{children:r}),""!==o&&(0,l.jsx)(a.azJ,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,l.jsx)(a.m_M,{tooltip:o,placement:"top",children:(0,l.jsx)(a.azJ,{className:o,children:(0,l.jsx)(a.NTw,{})})})})]}),(0,l.jsxs)(a.azJ,{withBorders:u,sx:{width:"100%",overflowY:"auto",height:150,position:"relative"},children:[m,(0,l.jsx)("div",{ref:b})]})]})})}},23758:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(65043),r=n(89923),i=n(94574),a=n(33097),l=n.n(a),o=n(70579);const d=i.Ay.button(e=>{let{theme:t}=e;return{border:`1px solid ${l()(t,"borderColor","#E2E2E2")}`,borderRadius:3,color:l()(t,"secondaryText","#5B5C5C"),backgroundColor:l()(t,"boxBackground","#FBFAFA"),fontSize:12}}),c=e=>{let{id:t,unitSelected:n,unitsList:i,disabled:a=!1,onUnitChange:l}=e;const[c,u]=s.useState(null),x=Boolean(c),h=e=>{u(null),""!==e&&l&&l(e)};return(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)(d,{id:`${t}-button`,"aria-controls":`${t}-menu`,"aria-haspopup":"true","aria-expanded":x?"true":void 0,onClick:e=>{u(e.currentTarget)},disabled:a,type:"button",children:n}),(0,o.jsx)(r.Vey,{id:"upload-main-menu",options:i,selectedOption:"",onSelect:e=>h(e),hideTriggerAction:()=>{h("")},open:x,anchorEl:c,anchorOrigin:"end"})]})}}}]);
//# sourceMappingURL=9619.d2199d11.chunk.js.map