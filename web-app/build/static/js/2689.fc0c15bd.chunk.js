"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[2689],{62689:(e,t,l)=>{l.r(t),l.d(t,{default:()=>_});var n=l(65043),i=l(22166),s=l(73216),c=l(89923),r=l(20649),a=l(77938),o=l(99161),d=l(64159),u=l(39947),p=l(21383),h=l(6681),x=l(72237),b=l(70579);const A=(0,x.A)(n.lazy(()=>l.e(9714).then(l.bind(l,79714)))),R=(0,x.A)(n.lazy(()=>l.e(459).then(l.bind(l,10459)))),m=(0,x.A)(n.lazy(()=>l.e(8152).then(l.bind(l,28152)))),_=()=>{const e=(0,p.jL)(),t=(0,s.g)(),l=(0,i.d4)(u.Nx),[x,_]=(0,n.useState)(!0),[S,T]=(0,n.useState)([]),[O,j]=(0,n.useState)(!1),[I,N]=(0,n.useState)(!1),[g,k]=(0,n.useState)(!1),[C,y]=(0,n.useState)(""),[f,P]=(0,n.useState)([]),[E,v]=(0,n.useState)(!1),F=t.bucketName||"",V=(0,a._)(F,[o.OV.S3_GET_REPLICATION_CONFIGURATION,o.OV.S3_GET_ACTIONS]);(0,n.useEffect)(()=>{e((0,d.ph)("bucket_detail_replication"))},[]),(0,n.useEffect)(()=>{l&&_(!0)},[l,_]),(0,n.useEffect)(()=>{x&&(V?r.A.invoke("GET",`/api/v1/buckets/${F}/replication`).then(e=>{const t=e.rules?e.rules:[];t.sort((e,t)=>e.priority-t.priority),T(t),_(!1)}).catch(t=>{e((0,d.C9)(t)),_(!1)}):_(!1))},[x,e,F,V]);const w=function(){N(arguments.length>0&&void 0!==arguments[0]&&arguments[0])},U=(0,s.Zp)(),G=[{type:"delete",onClick:e=>{y(e.id),v(!1),j(!0)}},{type:"view",onClick:e=>{y(e.id),U(`/buckets/edit-replication?bucketName=${F}&ruleID=${e.id}`)},disableButtonFunction:!(0,a._)(F,[o.OV.S3_PUT_REPLICATION_CONFIGURATION,o.OV.S3_PUT_ACTIONS],!0)}];return(0,b.jsxs)(n.Fragment,{children:[I&&(0,b.jsx)(R,{closeModalAndRefresh:()=>{w(!1),_(!0)},open:I,bucketName:F,setReplicationRules:S}),O&&(0,b.jsx)(m,{deleteOpen:O,selectedBucket:F,closeDeleteModalAndRefresh:e=>{j(!1),e&&_(!0)},ruleToDelete:C,rulesToDelete:f,remainingRules:S.length,allSelected:S.length>0&&f.length===S.length,deleteSelectedRules:E}),g&&(0,b.jsx)(A,{closeModalAndRefresh:e=>{k(!1),e&&_(!0)},open:g,bucketName:F,ruleID:C}),(0,b.jsx)(c._xt,{separator:!0,sx:{marginBottom:15},actions:(0,b.jsxs)(c.azJ,{style:{display:"flex",gap:10},children:[(0,b.jsx)(a.R,{scopes:[o.OV.S3_PUT_REPLICATION_CONFIGURATION,o.OV.S3_PUT_ACTIONS],resource:F,matchAll:!0,errorProps:{disabled:!0},children:(0,b.jsx)(h.A,{tooltip:"Remove Selected Replication Rules",children:(0,b.jsx)(c.$nd,{id:"remove-bucket-replication-rule",onClick:()=>{y("selectedRules"),v(!0),j(!0)},label:"Remove Selected Rules",icon:(0,b.jsx)(c.ucK,{}),color:"secondary",disabled:0===f.length||0===S.length,variant:"secondary"})})}),(0,b.jsx)(a.R,{scopes:[o.OV.S3_PUT_REPLICATION_CONFIGURATION,o.OV.S3_PUT_ACTIONS],resource:F,matchAll:!0,errorProps:{disabled:!0},children:(0,b.jsx)(h.A,{tooltip:"Add Replication Rule",children:(0,b.jsx)(c.$nd,{id:"add-bucket-replication-rule",onClick:()=>{U(o.zZ.BUCKETS_ADD_REPLICATION+`?bucketName=${F}&nextPriority=${S.length+1}`)},label:"Add Replication Rule",icon:(0,b.jsx)(c.REV,{}),variant:"callAction"})})})]}),children:(0,b.jsx)(c.V7x,{content:(0,b.jsx)(n.Fragment,{children:"Server-side bucket replication is an automatic bucket-level configuration that synchronizes objects between a source and destination bucket."}),placement:"right",children:"Replication"})}),(0,b.jsxs)(c.xA9,{container:!0,children:[(0,b.jsx)(c.xA9,{item:!0,xs:12,children:(0,b.jsx)(a.R,{scopes:[o.OV.S3_GET_REPLICATION_CONFIGURATION,o.OV.S3_GET_ACTIONS],resource:F,errorProps:{disabled:!0},children:(0,b.jsx)(c.bQt,{itemActions:G,columns:[{label:"Priority",elementKey:"priority",width:55,contentTextAlign:"center"},{label:"Destination",elementKey:"destination",renderFunction:e=>(0,b.jsx)(n.Fragment,{children:e.bucket.replace("arn:aws:s3:::","")})},{label:"Prefix",elementKey:"prefix",width:200},{label:"Tags",elementKey:"tags",renderFunction:e=>(0,b.jsx)(n.Fragment,{children:e&&""!==e.tags?"Yes":"No"}),width:60},{label:"Status",elementKey:"status",width:100}],isLoading:x,records:S,entityName:"Replication Rules",idField:"id",customPaperHeight:"400px",textSelectable:!0,selectedItems:f,onSelect:e=>(e=>{const t=e.target,l=t.value,n=t.checked;let i=[...f];return n?i.push(l):i=i.filter(e=>e!==l),P(i),i})(e),onSelectAll:()=>{f.length!==S.length?P(S.map(e=>e.id)):P([])}})})}),(0,b.jsxs)(c.xA9,{item:!0,xs:12,children:[(0,b.jsx)("br",{}),(0,b.jsx)(c.lVp,{title:"Replication",iconComponent:(0,b.jsx)(c.brV,{}),help:(0,b.jsx)(n.Fragment,{children:"This supports server-side and client-side replication of objects between source and destination buckets."})})]})]})]})}}}]);
//# sourceMappingURL=2689.fc0c15bd.chunk.js.map